# Claude Code Agent Teams

> 작성일: 2026-02-23

## 핵심 개념

- 여러 Claude Code 인스턴스가 **팀**으로 협력하는 방식
- 팀원끼리 **직접 메시지**를 주고받을 수 있음 (Sub-agents와의 결정적 차이)
- **실험적 기능** — 기본 비활성, 별도 설정 필요
- 토큰 비용이 높음 — 각 팀원이 별도 Claude 인스턴스

## Sub-agents vs Agent Teams

| | Sub-agents | Agent Teams |
|--|-----------|------------|
| 컨텍스트 | 독립 창, 결과만 반환 | 완전히 독립된 세션 |
| **통신** | **메인에게만 보고** | **팀원끼리 직접 메시지** |
| 조율 | 메인이 모든 작업 관리 | 공유 Task List로 자율 조율 |
| 비용 | 낮음 | 높음 |
| 적합한 작업 | 결과만 필요한 독립 작업 | 토론·협력이 필요한 복잡한 작업 |

## 구성요소

```
Team Lead (메인 세션)
    ├── Teammate A ─┐
    ├── Teammate B ─┼── 팀원끼리 직접 메시지 가능
    └── Teammate C ─┘
         ↕
    공유 Task List (작업 자율 할당)
    Mailbox (에이전트 간 메시지)
```

## 사용법

### 활성화

```json
// .claude/settings.json
{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

### 팀 생성 (자연어로 지시)

```
> CLI 툴을 설계할 팀을 만들어줘.
  UX 담당 1명, 아키텍처 담당 1명, 악마의 변호인 1명으로.
```

### 플랜 승인 필수 설정

```
> 인증 모듈 리팩터링 팀원을 만들어줘.
  변경 전 반드시 플랜 승인을 받도록 해줘.
```

### 팀원에게 직접 메시지

```
Shift+Down → 팀원 선택 → 직접 입력
```

### 팀 정리

```
> 팀을 정리해줘  ← 반드시 Team Lead에게 요청
```

## 언제 사용하나?

| Agent Teams 적합 | 단일 세션이 나음 |
|----------------|---------------|
| 병렬 코드 리뷰 (보안/성능/테스트 각각) | 순차 작업 (앞 결과가 다음에 필요) |
| 경쟁 가설로 버그 디버깅 | 같은 파일 수정 |
| 프론트/백엔드/테스트 동시 작업 | 간단한 작업 (조율 비용 > 이득) |

## 실전 패턴 예시

### 병렬 코드 리뷰

```
> PR #142를 리뷰할 팀을 만들어줘.
  - 보안 담당 리뷰어 1명
  - 성능 담당 리뷰어 1명
  - 테스트 커버리지 담당 리뷰어 1명
```

### 경쟁 가설 디버깅

```
> 앱이 메시지 1개 후 종료되는 버그를 조사할 팀원 5명을 만들어줘.
  각자 다른 가설을 조사하고 서로의 이론을 반박하도록 해줘.
```

## 제한사항 (실험적 기능)

- 세션 재개(`/resume`) 시 in-process 팀원 복원 불가
- 팀은 1개만 동시 운영 가능
- 팀원은 하위 팀을 만들 수 없음 (중첩 불가)
- 팀원 권한은 생성 시 일괄 설정, 개별 설정 불가
- Split pane은 tmux 또는 iTerm2 필요

## 실습 메모

- **팀원 간 직접 통신**이 Sub-agents와의 핵심 차이
- 정리는 반드시 Team Lead에게 요청 — 팀원이 직접 정리하면 리소스 오염 위험
- 같은 파일 수정하는 팀원이 생기지 않도록 작업 분리 필수
- 아직 실험적 기능이라 버그 있음 → 태스크 상태 지연, 종료 느림 등

## 다음 학습 주제

- [x] Plan Mode & 권한 모드
- [x] 멀티 에이전트 (Sub-agents)
- [x] Skills
- [x] Agent Teams
